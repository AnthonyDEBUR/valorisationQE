% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calcule_somme_pesticides.R
\name{calcule_somme_pesticides}
\alias{calcule_somme_pesticides}
\title{calcule_somme_pesticides}
\usage{
calcule_somme_pesticides(
  data,
  liste_pesticides = NULL,
  col_parametre = "CdParametre",
  col_date = "DatePrel",
  col_valeur = "RsAna",
  col_CdRq = "CdRqAna",
  col_LQ = "LqAna",
  col_station = "CdStationMesureEauxSurface",
  col_unite = "CdUniteMesure",
  valeur_inf_LQ = "0",
  resultat_seul = T
)
}
\arguments{
\item{data}{Dataframe contenant les résultats d'analyse.}

\item{liste_pesticides}{Vecteur des identifiants des pesticides à prendre en compte. Si NULL, tous les paramètres présents dans le tableau sont utilisés.}

\item{col_parametre}{Nom de la colonne identifiant les pesticides. Par défaut \code{"CdParametre"}.}

\item{col_date}{Nom de la colonne contenant les dates de prélèvement. Par défaut \code{"DatePrel"}.}

\item{col_valeur}{Nom de la colonne contenant les résultats d'analyse. Par défaut \code{"RsAna"}.}

\item{col_CdRq}{Nom de la colonne contenant les codes de remarque d'analyse. Par défaut \code{"CdRqAna"}.}

\item{col_LQ}{Nom de la colonne contenant les limites de quantification. Par défaut \code{"LqAna"}.}

\item{col_station}{Nom de la colonne identifiant les stations. Par défaut \code{"CdStationMesureEauxSurface"}.}

\item{col_unite}{Nom de la colonne contenant les unités de mesure. Par défaut \code{"CdUniteMesure"}.}

\item{valeur_inf_LQ}{Stratégie pour les valeurs inférieures à la LQ : \code{"0"} (remplacées par 0), \code{"LQ/2"} (remplacées par LQ/2), \code{"LQ"} (remplacées par LQ). Par défaut \code{"0"}.}

\item{resultat_seul}{Booléen. Si TRUE, seule la colonne de somme des pesticides est retournée. Si FALSE, chaque pesticide est retourné dans une colonne séparée. Par défaut \code{TRUE}.}
}
\value{
Un dataframe contenant les concentrations en pesticides par station et date, avec les traitements appliqués. Si \code{resultat_seul = TRUE}, seules les colonnes de somme sont retournées.
}
\description{
Calcule la somme des concentrations en pesticides
}
\details{
Cette fonction calcule la somme des concentrations en pesticides pour chaque station et chaque date.
Elle applique plusieurs règles de traitement :
\itemize{
\item Si plusieurs résultats existent pour un même paramètre, seule la valeur maximale est retenue.
\item Si un paramètre est inclus dans un autre (ex. S-métolachlore dans métolachlore total), seule la valeur du paramètre englobant est conservée.
\item Certains paramètres sont des sommes de plusieurs autres (ex. Somme des Hexachlorocyclohexanes).
\item Des conversions sont appliquées pour certains sels ou formes isomériques.
}
}
\examples{
data <- data.frame(
   DatePrel = Sys.Date() + rep(sort(sample(1:500, 10)), 3),
   RsAna = round(runif(60, 0, 0.5), 2),
   LqAna = 0.1,
   CdStationMesureEauxSurface = c("A", "B", "C"),
   CdParametre = c("1200", "1506"),
   CdUniteMesure = "133"
 )
 data$CdRqAna <- ifelse(data$RsAna >= data$LqAna, "1", "10")
 calcule_somme_pesticides(data)
}
