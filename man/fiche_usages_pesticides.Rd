% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fiche_usages_pesticides.R
\name{fiche_usages_pesticides}
\alias{fiche_usages_pesticides}
\title{fiche_usages_pesticides
Génère un tableau graphique des usages autorisés ou interdits des pesticides par culture}
\usage{
fiche_usages_pesticides(
  liste_cd_sandre,
  liste_pesticides,
  legend_position = "bottom",
  cultures_a_exclure = c()
)
}
\arguments{
\item{liste_cd_sandre}{Character vector. Liste des codes SANDRE des masses d'eau pour lesquelles on souhaite afficher les usages.}

\item{liste_pesticides}{Data frame. Issu de la fonction \code{importe_ref_pestibase}, contenant au minimum les colonnes :
\itemize{
\item \code{SA_CodeSANDRE} : code SANDRE de la masse d'eau
\item \code{id} : identifiant pestibase de la substance
\item \code{name_fr} : nom de la substance active
\item \code{function_finale} : fonction associée à la substance
\item \code{has_authorized_oepp_culture} : texte décrivant les cultures pour lesquelles la substance est autorisée
\item \code{has_removed_authorized_oepp_culture} : texte décrivant les cultures pour lesquelles l'autorisation a été retirée
\item \code{has_variant} : texte listant les identifiants pestibase de variants
}}

\item{legend_position}{Character. Position de la légende dans le tableau graphique. Valeurs possibles : \code{"top"}, \code{"bottom"}, \code{"left"}, \code{"right"}, \code{"none"}.}

\item{cultures_a_exclure}{Character vector. Liste des cultures à regrouper dans la catégorie "Autres cultures".
Les noms doivent correspondre aux intitulés des colonnes du tableau. Les éventuels sauts de ligne (\code{"\\n"}) dans les noms de colonnes sont automatiquement convertis en espace.
Les noms valides sont :
\itemize{
\item \code{"Céréales à paille"}
\item \code{"Maïs"}
\item \code{"Oléagineux"}
\item \code{"Prairies"}
\item \code{"Fourrages"}
\item \code{"Pomme de terre"}
\item \code{"Betterave"}
\item \code{"Légumes"}
\item \code{"Vignes"}
\item \code{"Traitements généraux"}
}}
}
\value{
Un objet graphique de type \code{grob} représentant un tableau coloré des usages par culture.
Ce tableau peut être affiché avec \code{grid::grid.draw()}.
}
\description{
Cette fonction permet de visualiser, sous forme de tableau coloré, les usages des substances actives
(pesticides) selon leur statut réglementaire : autorisé, interdit, variant ou jamais autorisé, pour différentes cultures.
Les couleurs indiquent :
\itemize{
\item \strong{vert} : la substance est actuellement autorisée sur la culture
\item \strong{rouge} : la substance a été retirée de l'autorisation
\item \strong{orange} : la substance n'est pas autorisée mais un de ses variants l'est
\item \strong{blanc} : la substance n'a jamais été autorisée sur la culture
}
}
\details{
Lorsque des cultures sont regroupées dans "Autres cultures", les statuts sont agrégés selon les règles suivantes :
\itemize{
\item Si au moins une culture est \code{"autorisée"} alors le statut devient \code{"autorisé"}
\item Sinon, si au moins une culture a \code{"un variant autorisé"} alors le statut devient \code{"variant autorisé"}
\item Sinon, si au moins une culture est \code{"interdite"} alors le statut devient \code{"interdit"}
\item Sinon le statut reste vide
}

Exemple : le Diméthénamide n'est plus autorisé sur certaines cultures, mais son variant Diméthénamide-P l'est encore.
Dans ce cas, le statut affiché est \code{"variant autorisé"} pour les cultures concernées.
}
\examples{
ref_pestibase <- importe_ref_pestibase()

fiche_usages_pesticides(liste_cd_sandre=c("2009", "1221", "1882", "5817", "5617", "1678", "1859"),
                                        liste_pesticides=ref_pestibase$liste_pesticides,
                        legend_position = "top",
                        cultures_a_exclure=c("Vignes", "Fourrages"))


}
